<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sad-Mar Zamówienia</title>
<style>
body{
font-family:sans-serif;
background:#f3f3f3;
padding:20px;
}
.card{
background:white;
padding:20px;
border-radius:14px;
max-width:500px;
margin:auto;
box-shadow:0 4px 20px rgba(0,0,0,0.1);
}
textarea,input{
width:100%;
padding:10px;
margin-top:8px;
border-radius:8px;
border:1px solid #ccc;
}
button{
margin-top:15px;
padding:12px;
border:none;
border-radius:10px;
background:#2c7a2c;
color:white;
font-weight:bold;
width:100%;
}
</style>
</head>
<body>
<div class="card">
<h2>Sad-Mar zamówienia</h2>

<label>Kod klienta</label>
<input id="code">

<label>Treść zamówienia</label>
<textarea id="order"></textarea>

<button id="btn" onclick="send()">Wyślij zamówienie</button>

<p id="msg"></p>

<script>
async function send() {
  const btn = document.getElementById("btn");
  const msg = document.getElementById("msg");

  const klient = document.getElementById("code").value.trim();
  const tresc = document.getElementById("order").value.trim();
  const telefon = ""; // na razie puste, można dodać pole później

  if (!klient || !tresc) {
    msg.innerText = "Uzupełnij kod klienta i treść zamówienia.";
    return;
  }

  btn.disabled = true;
  msg.innerText = "Wysyłam...";

  try {
    const res = await fetch("https://sadmar-backend.onrender.com/send-order", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ klient, telefon, tresc })
    });

    if (!res.ok) throw new Error("HTTP " + res.status);

    msg.innerText = "Wysłano ✅";
    document.getElementById("order").value = "";
  } catch (e) {
    console.error(e);
    msg.innerText = "Błąd wysyłki ❌ (sprawdź backend / logi Render)";
  } finally {
    btn.disabled = false;
  }
}
</script>


